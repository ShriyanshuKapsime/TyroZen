<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Attendance Tracker</title>
<style>
body { font-family: Arial; margin: 20px; }
input[type=text], input[type=number] { padding:5px; margin:5px; width:200px; }
button { padding:5px 10px; margin:5px; }
table { border-collapse: collapse; width: 100%; margin-top: 20px; }
th, td { border: 1px solid #000; padding: 8px; text-align:center; }
.green { background-color: #c8f7c5; }
.red { background-color: #f7c5c5; }
</style>
</head>
<body>
<h1>Attendance Tracker</h1>

<form method="POST" action="/attendance">
<input type="text" name="subject" placeholder="Subject Name" required>
<input type="number" name="total_classes" placeholder="Total Classes" min="1" required>
<input type="number" name="attended_classes" placeholder="Attended Classes" min="0" required>
<button type="submit">Add Subject</button>
</form>

<table>
<tr>
<th>Subject</th>
<th>Total Classes</th>
<th>Attended</th>
<th>Attendance %</th>
<th>Max Skips</th>
<th>Actions</th>
</tr>
{% for s in subjects %}
<tr class="{{ 'green' if s['attendance_percentage'] >= 75 else 'red' }}">
<td>{{ s['subject'] }}</td>
<td>{{ s['total_classes'] }}</td>
<td>{{ s['attended_classes'] }}</td>
<td>{{ s['attendance_percentage'] }}%</td>
<td>{{ s['max_skips'] }}</td>
<td>
<a href="/attendance/edit/{{ loop.index0 }}">Edit</a> |
<form method="POST" action="/attendance/delete/{{ loop.index0 }}" style="display:inline;">
  <button type="submit" onclick="return confirm('Delete this subject?')">Delete</button>
</form>
</td>
</tr>
{% endfor %}
</table>
</body>
</html>
